<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Admission – Step 1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>

<body>

  <div class="card admission-card">

    <h2>Online Admission</h2>
    <p class="subtitle">Step 1 of 3 – Student & Academic Details</p>

    <div class="progress-bar">
      <div class="progress-fill step-1"></div>
    </div>

    <form method="post">

      <!-- ================= STUDENT PERSONAL DETAILS ================= -->
      <div class="form-section">
        <h3 class="section-title">Student Personal Details</h3>

        <div class="form-grid two-col">

          <!-- NAME -->
          <input name="student_name" placeholder="Student Full Name" required>

          <!-- MOBILE (ONLY ONE) -->
          <div>
            <input type="tel" name="student_mobile" id="student_mobile" placeholder="Mobile Number" maxlength="10"
              required oninput="validateMobile()">
            <small id="mobile_msg"></small>
          </div>

          <!-- EMAIL (ONLY ONE) -->
          <div>
            <input type="email" name="student_email" id="student_email" placeholder="Gmail Address" required
              oninput="validateEmail()">
            <small id="email_msg"></small>
          </div>

          <!-- DOB -->
          <input type="date" name="dob" required>

          <!-- GENDER -->
          <select name="gender" required>
            <option value="">Select Gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>

          <!-- NATIONALITY -->
          <select name="indian_nationality" required>
            <option value="">Indian Nationality</option>
            <option value="YES">Yes</option>
            <option value="NO">No</option>
          </select>

          <!-- RELIGION -->
          <input name="religion" placeholder="Religion">

          <!-- CASTE -->
          <select name="caste_category" required>
            <option value="">Caste Category</option>
            <option>GEN</option>
            <option>OBC</option>
            <option>SC</option>
            <option>ST</option>
          </select>

          <!-- ALLOCATED CATEGORY -->
          <select name="allocated_category" required>
            <option value="">Allocated Category</option>
            <option>1G</option>
            <option>SCG</option>
            <option>STG</option>
            <option>2AG</option>
            <option>2BG</option>
            <option>3AG</option>
            <option>3BG</option>
            <option>GM</option>
          </select>

        </div>
      </div>

      <!-- ================= ACADEMIC DETAILS ================= -->
      <div class="form-section">
        <h3 class="section-title">Academic Details</h3>

        <div class="form-grid two-col">
          <select name="qualifying_exam" id="qualifying_exam" required onchange="toggleAcademicFields()">
            <option value="">Qualifying Exam</option>
            <option value="SSLC">SSLC</option>
            <option value="PUC">PUC</option>
            <option value="ITI">ITI</option>
          </select>

          <input name="year_of_passing" placeholder="Year of Passing" required>
          <input name="register_number" placeholder="Register Number" required>
        </div>

        <!-- SSLC / PUC -->
        <div id="school-marks" class="form-grid two-col" style="display:none;">
          <input name="maths_marks" placeholder="Maths Marks">
          <input name="science_marks" placeholder="Science Marks">
          <input name="total_marks" placeholder="Total Marks">
          <input name="marks_obtained" placeholder="Marks Obtained">
          <input name="percentage" placeholder="Percentage">
        </div>

        <!-- ITI -->
        <div id="iti-marks" class="form-grid two-col" style="display:none;">
          <input name="total_marks_iti" placeholder="Total Marks">
          <input name="marks_obtained_iti" placeholder="Marks Obtained">
          <input name="percentage_iti" placeholder="Percentage">
        </div>
      </div>

      <!-- ================= ADMISSION DETAILS ================= -->
      <div class="form-section">
        <h3 class="section-title">Admission Details</h3>

        <div class="form-grid two-col">
          <select name="admission_quota" required>
            <option value="">Admission Quota</option>
            <option>Government</option>
            <option>SNQ</option>
            <option>Management</option>
          </select>

          <select name="branch" required>
            <option value="">Select Branch</option>
            <option>Computer Engineering</option>
            <option>Electronics & Communication</option>
            <option>Mechanical Engineering</option>
            <option>Automobile Engineering</option>
          </select>

          <input type="password" name="password" placeholder="Create Password" required>
        </div>
      </div>

      <!-- ================= NEXT ================= -->
      <div class="form-actions">
        <button type="submit" class="btn primary">
          Next →
        </button>
      </div>

    </form>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script>
    function toggleAcademicFields() {
      const exam = document.getElementById("qualifying_exam").value;
      document.getElementById("school-marks").style.display =
        (exam === "SSLC" || exam === "PUC") ? "grid" : "none";
      document.getElementById("iti-marks").style.display =
        (exam === "ITI") ? "grid" : "none";
    }

    function validateMobile() {
      const input = document.getElementById("student_mobile");
      const msg = document.getElementById("mobile_msg");

      input.value = input.value.replace(/[^0-9]/g, "");

      if (input.value.length < 10) {
        msg.textContent = "❌ Invalid mobile number";
        msg.style.color = "red";
      } else {
        msg.textContent = "✅ Valid mobile number";
        msg.style.color = "green";
      }
    }

    function validateEmail() {
      const email = document.getElementById("student_email").value;
      const msg = document.getElementById("email_msg");

      const gmailPattern = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;

      if (!gmailPattern.test(email)) {
        msg.textContent = "❌ Invalid Gmail address";
        msg.style.color = "red";
      } else {
        msg.textContent = "✅ Valid Gmail address";
        msg.style.color = "green";
      }
    }
  </script>

</body>

</html>